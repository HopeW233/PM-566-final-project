---
title: "PM566 Final Project"
author: "Lin Wang"
output: 
    html_document:
        toc: TRUE
        toc_float: TRUE
---
<br>

This is my PM566 Final Project website, you can access the full report [here]()

<br>

```{r setup, message=FALSE, warning=FALSE, include=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,
  message = FALSE,
  eval=TRUE,
  echo = FALSE,
  cache = FALSE,
  fig.width = 7, 
  fig.align = 'center',
  fig.asp = 0.618,
  out.width = "700px",
  class.source = "code-r")

library(data.table)
library(tidyverse)
library(dplyr)
library(plotly)
library(ggplot2)
library(DT)
```

```{css, echo = FALSE}
.code-r { /* Code block */
  font-size: 15px;
}

.code-r-small { /* Code block */
  font-size: 10px;
}
```

## **Introduction**

On March 16, six counties in Bay Area became the first in the nation to announce shelter-in-place orders and on March19, California became the first to mandate a state-wide order. Since then, additional states across the country began 

### 1. Dataset

California daily covid data from [COVID19Tracking]<https://covidtracking.com/data/download> 

Covid data per US counties from [NYT]
<https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-counties.csv>

2018 State population data from [NYT] <https://raw.githubusercontent.com/COVID19Tracking/associated-data/master/us_census_data/us_census_2018_population_estimates_states.csv>

Lockdown data from [Aura Vision's Lockdown Tracker]<https://covid19-lockdown-tracker.netlify.com/lockdown_dates.csv>


### 2. Formulated question

The objective for this project is to investigate:

1. Association between COVID death rate and pop density.

2. Is there any difference in COVID trend after safe at home policy announcement?


```{r load-data}
source(knitr::purl("Midterm.rmd", quiet=FALSE))
```

## **Methods**

## **Results**

### Overview of data set
```{r, echo=FALSE}
datatable(table)
```

### Developing trends of CFR and IFR 
```{r, echo=FALSE}
ggplotly(fig1)
```

### Hypothesis Test of Covid Death Rate
```{r, echo=FALSE}
ggplotly(fig2, tooltip = c("state", "Death Rate"))
```

### COVID-19 death rate vs. population density
```{r, echo=FALSE}
fig3
```

### New cases in California by month
```{r, echo=FALSE}
ggplotly(fig4)
```


### Map on county level

###  {.tabset}

### Covid cases across California today

```{r plot4, class.source="code-r-small",echo = FALSE}
ggplotly(p2)
```

### Covid deaths across California today

```{r plot5, class.source="code-r-small",echo = FALSE}
ggplotly(p3)
```

### Counties in CA with top ten cases/deaths{.tabset}

```{r plot6, class.source="code-r-small",echo = FALSE}
top_10_cases %>%
  plot_ly(x = ~reorder(county,-cases), y =~cases, type = 'bar') %>%
  layout(title = "Counties in CA with top ten cases",
         xaxis = list(title ="County"))
```

```{r plot7, class.source="code-r-small",echo = FALSE}
top_10_deaths %>%
  plot_ly(x = ~reorder(county,-deaths), y =~deaths, type = 'bar') %>%
  layout(title = "Counties in CA with top ten deaths",
         xaxis = list(title ="County"))
```

## **Conclusion**

